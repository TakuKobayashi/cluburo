<script>
  var url = window.location.href
  var host = window.document.location.host;
  var ws;
  if(url.startsWith("https://")){
    ws = new WebSocket('wss://' + host + "/cable");
  }else{
   ws = new WebSocket('ws://' + host + "/cable");
  }
  var create_room = function(){
    var command = {command: "subscribe"}
    var channel_params = {channel: "DjRoomsChannel", room_id: <%= 1 %>}
    command["identifier"] = JSON.stringify(channel_params);
    ws.send(JSON.stringify(command));
  }
  ws.onopen = function(event){
    create_room();
  };
  ws.onmessage = function (event) {
    console.log(event);
    //$("#list").append($('<li>').text(event.data));
  };
</script>
<h1>Chat</h1>

<form>
  <label>Say something:</label><br>
  <input type="text" data-behavior="message_sender">
</form>